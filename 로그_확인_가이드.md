# 로그 확인 가이드

## 📍 로그 파일 위치

API 서버 자동 업데이트 로그는 다음 위치에 저장됩니다:

```bash
/tmp/api_auto_update.log
```

## 👀 로그 확인 방법

### 1. 전체 로그 보기

```bash
cat /tmp/api_auto_update.log
```

### 2. 최근 로그 보기 (마지막 20줄)

```bash
tail -20 /tmp/api_auto_update.log
```

### 3. 실시간 로그 보기 (추가되는 내용 실시간 확인)

```bash
tail -f /tmp/api_auto_update.log
```

### 4. 특정 날짜 로그만 보기

```bash
grep "2026-01-09" /tmp/api_auto_update.log
```

### 5. 오늘 로그만 보기

```bash
grep "$(date +%Y-%m-%d)" /tmp/api_auto_update.log
```

## 📋 로그 형식

### 실제 로그 예시

```
[2026-01-09 15:40:00] 🔄 코드 업데이트 체크 시작...
[2026-01-09 15:40:00] ✅ 최신 코드입니다. 업데이트 불필요.
[2026-01-09 15:45:00] 🔄 코드 업데이트 체크 시작...
[2026-01-09 15:45:03] ✅ 최신 코드입니다. 업데이트 불필요.
```

### 로그 형식 설명

- `[2026-01-09 15:40:00]`: 타임스탬프 (날짜 시간)
- `🔄 코드 업데이트 체크 시작...`: 실행 시작 메시지
- `✅ 최신 코드입니다. 업데이트 불필요.`: 결과 메시지

### 변경사항이 있을 때 로그 예시

```
[2026-01-09 16:10:00] 🔄 코드 업데이트 체크 시작...
[2026-01-09 16:10:01] 📥 변경사항 발견! 업데이트 시작...
[2026-01-09 16:10:02] ✅ 코드 업데이트 완료
[2026-01-09 16:10:02] 🔄 API 서버 재시작 중...
[2026-01-09 16:10:02]    기존 서버 종료 중... (PID: 12345)
[2026-01-09 16:10:04]    새 서버 시작 중...
[2026-01-09 16:10:07] ✅ 업데이트 및 재시작 완료!
```

## 🔍 로그에서 확인할 수 있는 정보

### 1. 실행 시간

```bash
# 마지막 실행 시간 확인
tail -1 /tmp/api_auto_update.log
```

### 2. 오늘 실행 횟수

```bash
grep "$(date +%Y-%m-%d)" /tmp/api_auto_update.log | grep "체크 시작" | wc -l
```

### 3. 오늘 업데이트 횟수

```bash
grep "$(date +%Y-%m-%d)" /tmp/api_auto_update.log | grep "업데이트 및 재시작 완료" | wc -l
```

### 4. 에러 확인

```bash
grep "❌\|실패\|에러\|error" /tmp/api_auto_update.log
```

## 📊 로그 분석 예시

### 오늘의 활동 요약

```bash
echo "=== 오늘의 자동 업데이트 활동 ==="
echo "총 실행 횟수: $(grep "$(date +%Y-%m-%d)" /tmp/api_auto_update.log | grep "체크 시작" | wc -l)"
echo "업데이트 횟수: $(grep "$(date +%Y-%m-%d)" /tmp/api_auto_update.log | grep "업데이트 및 재시작 완료" | wc -l)"
echo "최신 상태 유지: $(grep "$(date +%Y-%m-%d)" /tmp/api_auto_update.log | grep "최신 코드" | wc -l)"
```

### 최근 업데이트 내역

```bash
grep "변경사항 발견\|업데이트 완료\|재시작 완료" /tmp/api_auto_update.log | tail -10
```

## ⚠️ 로그 파일 관리

### 로그 파일 크기 확인

```bash
ls -lh /tmp/api_auto_update.log
```

### 로그 파일이 너무 커지면

```bash
# 로그 파일 백업 후 초기화
cp /tmp/api_auto_update.log /tmp/api_auto_update.log.backup
> /tmp/api_auto_update.log
```

### 로그 파일 삭제

```bash
rm /tmp/api_auto_update.log
# 다음 실행 시 자동으로 다시 생성됨
```

## 🎯 실제 사용 예시

### 실시간 모니터링

```bash
# 터미널 1: 실시간 로그 확인
tail -f /tmp/api_auto_update.log

# 터미널 2: 다른 작업 수행
# 터미널 1에서 자동 업데이트 진행 상황을 실시간으로 볼 수 있음
```

### 문제 발생 시 확인

```bash
# 최근 50줄 확인
tail -50 /tmp/api_auto_update.log

# 에러 메시지 확인
grep -i "error\|fail\|실패" /tmp/api_auto_update.log | tail -10
```

## 📝 참고사항

- 로그 파일은 `/tmp` 디렉토리에 저장되므로 시스템 재부팅 시 삭제될 수 있습니다
- 중요한 로그는 정기적으로 백업하는 것을 권장합니다
- 로그 파일은 계속 쌓이므로 주기적으로 관리하는 것이 좋습니다

---

**마지막 업데이트**: 2026년 1월 9일
