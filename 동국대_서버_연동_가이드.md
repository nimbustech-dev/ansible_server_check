# 동국대 서버 연동 가이드

## 📋 필요한 정보

동국대 서버를 점검하기 위해 다음 정보가 필요합니다:

### 1. 서버 접속 정보
- [ ] **서버 IP 주소** (예: `192.168.1.100`)
- [ ] **SSH 포트** (기본: 22, 또는 다른 포트)
- [ ] **사용자명** (예: `root`, `admin`, `dongguk` 등)
- [ ] **인증 방법**
  - 비밀번호
  - SSH 키 파일 (`.pem`, `.key` 등)

### 2. SSH 키 파일 사용 시
- [ ] **SSH 키 파일 위치** (예: `C:\Users\님버스테크\.ssh\dongguk_key`)
- [ ] **키 파일을 WSL로 복사 필요 여부**

---

## 🔧 설정 방법

### 방법 1: 서버 접속 정보가 있는 경우

#### 1단계: Inventory 파일 수정

`inventory/dongguk_servers.ini` 파일을 열고 동국대 서버 정보를 입력:

```ini
[dongguk_servers]
dongguk_server1 ansible_host=서버IP주소 ansible_user=사용자명 ansible_port=SSH포트
```

**예시:**
```ini
[dongguk_servers]
dongguk_server1 ansible_host=192.168.56.100 ansible_user=root ansible_port=22
```

#### 2단계: SSH 접속 테스트 (WSL에서)

```bash
cd /mnt/c/ansible_server_check

# SSH 직접 접속 테스트
ssh -p 22 사용자명@서버IP주소

# 또는 Ansible 연결 테스트
ansible dongguk_server1 -i inventory/dongguk_servers.ini -m ping --ask-pass
```

#### 3단계: OS 점검 실행

```bash
# 비밀번호 인증
ansible-playbook -i inventory/dongguk_servers.ini redhat_check/redhat_check.yml --ask-pass --ask-become-pass

# SSH 키 인증
ansible-playbook -i inventory/dongguk_servers.ini redhat_check/redhat_check.yml --ask-become-pass
```

---

### 방법 2: SSH 키 파일 사용 시

#### 1단계: SSH 키 파일을 WSL로 복사

```bash
# Windows의 SSH 키를 WSL로 복사
cp /mnt/c/Users/님버스테크/.ssh/dongguk_key ~/.ssh/
chmod 600 ~/.ssh/dongguk_key
```

#### 2단계: Inventory 파일에 키 경로 지정

```ini
[dongguk_servers]
dongguk_server1 ansible_host=서버IP주소 ansible_user=사용자명 ansible_ssh_private_key_file=~/.ssh/dongguk_key
```

#### 3단계: 점검 실행

```bash
ansible-playbook -i inventory/dongguk_servers.ini redhat_check/redhat_check.yml --ask-become-pass
```

---

## 🔍 서버 정보 확인 방법

### 기존 접속 기록 확인

#### Windows에서:
```powershell
# SSH 접속 기록 확인
type C:\Users\님버스테크\.ssh\config

# PuTTY 저장된 세션 확인
reg query "HKCU\Software\SimonTatham\PuTTY\Sessions"
```

#### WSL에서:
```bash
# SSH 설정 파일 확인
cat ~/.ssh/config

# SSH 키 파일 확인
ls -la ~/.ssh/

# 알려진 호스트 확인
cat ~/.ssh/known_hosts
```

---

## ⚠️ 문제 해결

### 1. SSH 접속 안 될 때

```bash
# 연결 테스트
ping 서버IP주소

# 포트 확인
telnet 서버IP주소 22
# 또는
nc -zv 서버IP주소 22

# SSH 디버그 모드
ssh -v -p 22 사용자명@서버IP주소
```

### 2. VPN 연결 필요 시

Radmin VPN이나 다른 VPN이 연결되어 있어야 접속 가능할 수 있습니다.
- VPN 연결 상태 확인
- VPN 네트워크 대역 확인 (현재: `26.27.230.192`)

### 3. 방화벽 문제

```bash
# Windows 방화벽 확인
# 제어판 > Windows Defender 방화벽 > 고급 설정

# WSL에서 포트 확인
netstat -an | grep 22
```

---

## 📝 다음 단계

1. **서버 접속 정보 수집**
   - 서버 IP 주소
   - SSH 포트
   - 사용자명
   - 인증 방법

2. **Inventory 파일 수정**
   - `inventory/dongguk_servers.ini` 파일 열기
   - 실제 서버 정보 입력

3. **SSH 접속 테스트**
   - 직접 SSH 접속 또는 Ansible ping 테스트

4. **점검 실행**
   - OS 점검 플레이북 실행
   - 결과 확인

---

**작성일**: 2026년 1월 7일  
**참고**: 현재 VPN 연결 상태 (Radmin VPN: `26.27.230.192`)

