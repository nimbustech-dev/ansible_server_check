# 인증키 변경 문제 해결 가이드

## 🔍 현재 문제

- 관리자 비밀번호 설정 실패
- 서버 재시작해도 동일한 문제 발생
- 인증키 변경 과정에서 오류 발생

## ✅ 해결 방법

### 방법 1: 서버 접속 콘솔로 직접 확인 (권장)

네이버 클라우드 콘솔에서:
1. Server → Server → nimbus-server 선택
2. "서버 접속 콘솔" 버튼 클릭
3. root로 로그인 (비밀번호: 매뉴얼에 있는 비밀번호 사용)

서버 콘솔에서 확인:
```bash
# SSH 서비스 상태 확인
systemctl status sshd

# SSH 서비스가 실행 중인지 확인
netstat -tlnp | grep 22

# authorized_keys 파일 확인
cat ~/.ssh/authorized_keys

# 파일 권한 확인
ls -la ~/.ssh/
```

### 방법 2: 인증키 변경 다시 시도

1. 서버를 완전히 정지
2. "서버 관리 및 설정 변경" → "서버 인증키 변경"
3. "새로운 인증키 생성" 선택
4. 새 키 이름 입력 (예: `nimbus-new-key-2026`)
5. "변경" 버튼 클릭
6. 새 `.pem` 파일 다운로드
7. 서버 시작
8. 관리자 비밀번호 확인

### 방법 3: 기존 방법으로 공개키 추가 (가장 안전)

인증키 변경 대신, 서버 접속 콘솔에서:
1. 서버 접속 콘솔 열기
2. root로 로그인
3. `nano ~/.ssh/authorized_keys` 실행
4. 새 공개키 추가 (기존 키 유지)
5. 권한 설정: `chmod 600 ~/.ssh/authorized_keys`

이 방법이 가장 안전합니다:
- 기존 키 유지 (nimsou 정상 작동)
- 서버 정지 불필요
- 인증키 변경 오류 회피

---

## 🎯 추천 방법

**방법 3 (공개키 추가)**을 권장합니다.

이유:
- 인증키 변경 오류 회피
- 기존 시스템에 영향 없음
- 서버 정지 불필요

---

## 📝 작업 순서 (방법 3)

1. 서버 접속 콘솔 열기
2. root로 로그인
3. 다음 명령어 실행:
   ```bash
   nano ~/.ssh/authorized_keys
   ```
4. 공개키 추가 (기존 키 유지)
5. 저장: `Ctrl + X` → `Y` → `Enter`
6. 권한 설정:
   ```bash
   chmod 600 ~/.ssh/authorized_keys
   ```
7. 확인:
   ```bash
   cat ~/.ssh/authorized_keys
   ```

---

**작성일**: 2026년 1월 6일

